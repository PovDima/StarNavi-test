(this.webpackJsonpstarnavi=this.webpackJsonpstarnavi||[]).push([[0],{101:function(e,n,t){},102:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"SUCCESS_GET_SERVER_DATA",(function(){return R})),t.d(r,"getServerData",(function(){return y}));var i={};t.r(i),t.d(i,"SUCCESS_SET_WINNER",(function(){return T})),t.d(i,"SET_FIELD",(function(){return N})),t.d(i,"SET_USER_FIELD",(function(){return D})),t.d(i,"SET_COMPUTER_FIELD",(function(){return I})),t.d(i,"START_AGAIN",(function(){return F})),t.d(i,"setWinner",(function(){return U})),t.d(i,"setActiveField",(function(){return M})),t.d(i,"setUserField",(function(){return L})),t.d(i,"setComputerField",(function(){return P})),t.d(i,"startAgain",(function(){return Y}));var a=t(0),s=t.n(a),c=t(6),u=t.n(c),o=t(22),l=t(12),d=t(7),v=t.n(d),f=t(21),p=t(16),m=t(33),h=t(34),g=t(38),w=t(37),E=t(57),b=t.n(E),A=new(function(){function e(n){Object(f.a)(this,e),this.instance=b.a.create(Object(l.a)({},n))}return Object(p.a)(e,[{key:"get",value:function(e){var n;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.awrap(this.instance.get(e));case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"post",value:function(e,n){var t;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.a.awrap(this.instance.post(e,n));case 3:return t=r.sent,r.abrupt("return",t);case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),null,this,[[0,7]])}}]),e}())({baseURL:"https://starnavi-frontend-test-task.herokuapp.com"}),R="SUCCESS_GET_SERVER_DATA";function y(){return function(e){var n,t,r,i;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.awrap(Promise.all([A.get("/game-settings"),A.get("/winners")]));case 3:n=a.sent,t=Object(w.a)(n,2),r=t[0],i=t[1],e({type:R,winners:i.data,settings:r.data}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])}}var O=t(130);t(95);var j=Object(o.b)((function(e){return{winners:e.serverData.winners}}))((function(e){return s.a.createElement("div",{className:"componentWrapper"},s.a.createElement("p",{className:"header"},"Leader Board"),e.winners.length>0?e.winners.map((function(e){return s.a.createElement("div",{key:e.id,className:"row"},s.a.createElement("div",null,e.winner),s.a.createElement("div",null,e.date))})):s.a.createElement(O.a,null))})),B=t(15),G=t(59),S=t.n(G),x=t(60),C=t.n(x),_=t(135),k=t(137),W=t(134),T="SUCCESS_SET_WINNER",N="SET_FIELD",D="SET_USER_FIELD",I="SET_COMPUTER_FIELD",F="START_AGAIN";function U(e){return function(n){var t,r,i,a,s;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,v.a.awrap(A.post("/winners",e));case 3:return c.next=5,v.a.awrap(Promise.all([A.get("/game-settings"),A.get("/winners")]));case 5:t=c.sent,r=Object(w.a)(t,2),i=r[0],a=r[1],s=e.winner,n({type:R,winners:a.data,settings:i.data}),n({type:T,gameWinner:s}),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(0),console.log(c.t0);case 17:case"end":return c.stop()}}),null,null,[[0,14]])}}function M(e){return function(n){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:N,id:e});case 1:case"end":return t.stop()}}))}}function L(e){return function(n){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:D,id:e});case 1:case"end":return t.stop()}}))}}function P(){return function(e){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:I});case 1:case"end":return n.stop()}}))}}function Y(){return function(e){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:F});case 1:case"end":return n.stop()}}))}}t(97);var H=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(m.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(i)))).state={mode:"",winner:""},t.startGame=function(){var e=t.props,n=e.setActiveField,r=e.fields,i=e.settings,a=e.setComputerField,s=e.setWinner,c=t.state,u=c.mode,o=c.winner,l=r.filter((function(e){return e.isActive}));if(r.length-l.length>=i[u].field){var d=r.filter((function(e){return e.isRed})).length,v=r.filter((function(e){return e.isGreen})).length;a(),s({winner:v>d?o:"Computer",date:S()().format("HH:mm; DD MMMM YYYY")}),clearInterval(t.interval)}else{n(l[Math.floor(Math.random()*l.length)].id)}},t.handleChange=function(e){return function(n){return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(t.setState(Object(B.a)({},e,n.target.value)));case 2:case"end":return r.stop()}}))}},t.handleAgain=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(t.props.startAgain());case 2:return e.next=4,v.a.awrap(t.handleStart());case 4:case"end":return e.stop()}}))},t.handleStart=function(){var e,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=t.props.settings,n=t.state.mode,t.interval=setInterval(t.startGame,e[n].delay);case 3:case"end":return r.stop()}}))},t.handleSetField=function(e){t.props.setUserField(e.target.id)},t.renderInput=function(){var e=t.props,n=e.settings,r=e.gameWinner,i=t.state,a=i.mode,c=i.winner;return s.a.createElement("div",{className:"inputBlock"},s.a.createElement(_.a,{select:!0,label:"Pick game mode",value:a,className:"input",onChange:t.handleChange("mode")},Object.keys(n).map((function(e){return s.a.createElement(k.a,{key:n[e].field,value:e},e)}))),s.a.createElement(_.a,{placeholder:"Enter your name",label:"Enter your name",value:c,onChange:t.handleChange("winner"),className:"input"}),s.a.createElement(W.a,{variant:"contained",className:"button",disabled:!c||!a,onClick:r?t.handleAgain:t.handleStart},r?"Play Again":"Play"))},t}return Object(g.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.gameWinner,r=n.fields;return s.a.createElement("div",{className:"componentWrapper"},this.renderInput(),t||"",s.a.createElement("div",{className:"gameWrapper"},r.map((function(n){return s.a.createElement("div",{key:n.id,id:n.id,onClick:n.isBlue?e.handleSetField:function(){},className:C()("field",{active:n.isBlue,user:n.isGreen,computer:n.isRed})})}))))}}]),n}(a.PureComponent),J=Object(o.b)((function(e){return{settings:e.serverData.settings,gameWinner:e.game.gameWinner,fields:e.game.fields}}),Object(l.a)({},i))(H),V=(t(98),function(e){function n(){return Object(f.a)(this,n),Object(m.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(g.a)(n,e),Object(p.a)(n,[{key:"componentDidMount",value:function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(this.props.getServerData());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(J,null),s.a.createElement(j,null))}}]),n}(a.Component)),$=Object(o.b)((function(e){return{}}),Object(l.a)({},r))(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=t(23),z=t(61),K={winners:[],settings:{}};var Q=t(18),X=t(8),Z=t.n(X),ee=[{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0},{id:Z()(),isBlue:!1,isRed:!1,isGreen:!1,isActive:!0}],ne={gameWinner:"",fields:Object(Q.a)(ee.map((function(e){return Object(l.a)({},e)})))};var te=Object(q.c)({serverData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.winners,i=n.settings;switch(t){case R:return Object(l.a)({},e,{winners:r,settings:i});default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.gameWinner,i=n.id;switch(t){case T:return Object(l.a)({},e,{gameWinner:r});case N:return Object(l.a)({},e,{fields:e.fields.map((function(e){var n=e;return n.isBlue&&(n.isRed=!0,n.isBlue=!1,n.isActive=!1),n.id===i&&(n.isBlue=!0,n.isActive=!1),Object(l.a)({},n)}))});case D:return Object(l.a)({},e,{fields:e.fields.map((function(e){var n=e;return n.id===i&&(n.isGreen=!0,n.isBlue=!1,n.isActive=!1),Object(l.a)({},n)}))});case I:return Object(l.a)({},e,{fields:e.fields.map((function(e){var n=e;return n.isBlue&&(n.isRed=!0,n.isBlue=!1,n.isActive=!1),Object(l.a)({},n)}))});case F:return{gameWinner:ne.gameWinner,fields:Object(Q.a)(ee.map((function(e){return Object(l.a)({},e)})))};default:return e}}});t(101);var re=function(){var e=q.d;return Object(q.e)(te,e(Object(q.a)(z.a)))}();u.a.render(s.a.createElement(o.a,{store:re},s.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,n,t){e.exports=t(102)},95:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.51f38932.chunk.js.map